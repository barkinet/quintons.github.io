{"version":3,"sources":["main.js","requestanimationframe.js","smoothscroll-0.3.4.js"],"names":["callback","qs","addEventListener","addClass","this","removeClass","focus","className","indexOf","height","window","screen","scrollBy","top","left","behavior","scroll","movement","parseInt","scrollY","style","opacity","toFixed","sitenavWrapper","count","outside","setInterval","twitterIframe","document","getElementById","clearInterval","inside","docBody","contentWindow","body","tweets","querySelectorAll","post_dates","li_list","length","i","replace","tweet","h","childNodes","node","nodeType","Node","ELEMENT_NODE","removeAttribute","innerHTML","getAttribute","querySelector","console","log","lastTime","vendors","x","requestAnimationFrame","cancelAnimationFrame","element","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","w","d","undefined","polyfill","scrollElement","y","scrollLeft","scrollTop","ease","k","cos","PI","shouldBailOut","TypeError","findScrollableParent","el","isBody","hasScrollableSpace","hasVisibleOverflow","parentNode","clientHeight","scrollHeight","clientWidth","scrollWidth","getComputedStyle","overflow","step","context","frame","bind","value","currentX","currentY","time","now","elapsed","startTime","SCROLL_TIME","startX","startY","method","call","scrollable","smoothScroll","scrollX","pageXOffset","pageYOffset","original","documentElement","Element","HTMLElement","scrollTo","elScroll","prototype","scrollIntoView","performance","arguments","arg0","scrollableParent","parentRects","getBoundingClientRect","clientRects","exports","module","class_name","b_getall","ele","classList","add","remove","readyState","doScroll"],"mappings":"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","file":"main.min.js","sourcesContent":["/* Custom Javascript code */\n\n\n  /**\n   * Utility methods\n   * */\n  var qs = function (class_name, b_getall) {\n    return (b_getall === true) ? document.querySelectorAll(class_name) : document.querySelector(class_name);\n  };\n\n  var addClass = function (ele, class_name) {\n    ele.classList.add(class_name);\n  };\n\n  var removeClass = function (ele, class_name) {\n    ele.classList.remove(class_name);\n  };\n\n  if(document.readyState === \"complete\" || (document.readyState !== \"loading\" && !document.documentElement.doScroll)){\n    callback();\n  }else{\n    document.addEventListener(\"DOMContentLoaded\", callback);\n  }\n\n  /**\n   * callback code executed on load of document\n   */\n  function callback() {\n\n    /**\n     * DOM event bindings\n     * */\n    qs('.js-search-icon').addEventListener('click', function () {\n      addClass(this, 'is-hidden');\n      removeClass(qs('.js-close-icon'), 'is-hidden');\n      removeClass(qs('.js-search'), 'is-hidden');\n      qs('.search .search__input').focus();\n    });\n\n    qs('.js-close-icon').addEventListener('click', function () {\n      addClass(this, 'is-hidden');\n      removeClass(qs('.js-search-icon'), 'is-hidden');\n      addClass(qs('.js-search'), 'is-hidden');\n    });\n\n    qs('.js-burger-icon').addEventListener('click', function () {\n      if (this.className.indexOf('is-fixed') > -1) {\n        removeClass(this, 'is-fixed');\n        removeClass(this, 'show-cross');\n        removeClass(qs('.js-mobile-nav'), 'is-open');\n        removeClass(qs('.js-mobile-overlay'), 'is-visible');\n      } else {\n        addClass(this, 'is-fixed');\n        addClass(this, 'show-cross');\n        addClass(qs('.js-mobile-nav'), 'is-open');\n        addClass(qs('.js-mobile-overlay'), 'is-visible');\n      }\n    });\n\n    qs('.js-header__arrow').addEventListener('click', function () {\n      var height = window.screen.height === 320 ? window.screen.height - 50 : 330;\n      window.scrollBy({top: height, left: 0, behavior: 'smooth'});\n      return false;\n    });\n    qs('.totop__link').addEventListener('click', function () {\n      window.scroll({top: 0, left: 0, behavior: 'smooth'});\n    });\n\n    /**\n     * window event change opacity on 'header__detail'\n     */\n    window.addEventListener('scroll', function () {\n      var height = window.screen.height === 320 ? window.screen.height : 380;\n      var movement = (1 - (parseInt(this.scrollY / (0.1 * height)) / 10));\n      var header = qs('.header-detail').style.opacity = movement.toFixed(1);\n\n      var top = qs('.totop');\n\n      if (this.scrollY >= (height - 50)) {\n        addClass(top, 'js-totop');\n      } else {\n        if (top.className.indexOf('js-totop') > -1) {\n          removeClass(top, 'js-totop');\n        }\n      }\n\n      var sitenavWrapper = qs('.site-nav-wrapper');\n\n      if (this.scrollY >= (25)) {\n        addClass(sitenavWrapper, 'is-dropdown');\n      } else {\n        if (this.scrollY <= (25)) {\n          if (sitenavWrapper.className.indexOf('is-dropdown') >= -1) {\n            removeClass(sitenavWrapper, 'is-dropdown');\n          }\n        }\n      }\n\n    });\n\n    /**\n     * interrogates the twitter iframe and builds the twitter list\n     * done in native to minimise use of jQuery - maybe use mobile version?\n     */\n    var count = [0, 0];\n    var outside = setInterval(function () {\n\n      var twitterIframe = document.getElementById('twitter-widget-0');\n\n      (count[0] > 10 || twitterIframe !== null) ? clearInterval(outside) : count[0]++;\n\n      if (twitterIframe !== null) {\n        var inside = setInterval(function () {\n\n          var docBody = twitterIframe.contentWindow.document.body,\n            tweets = docBody.querySelectorAll('.timeline-Tweet-text'),\n            post_dates = docBody.querySelectorAll('.dt-updated'),\n            li_list = '';\n\n          (count[1] > 10 || tweets.length > 1) ? clearInterval(inside) : count[1]++;\n\n          if (tweets.length > 1) {\n\n            for (var i = 0; i < tweets.length; i++) {\n\n              li_list += '<li class=\"tweets__item\"><span class=\"fa fa-twitter\"></span><p class=\"item__desc\">{desc}</p><p class=\"item__date\">{date}</p></li>'\n                .replace('{desc}', function (tweet) {\n\n                  for (var h = 0; h < tweet.childNodes.length; h++) {\n                    var node = tweet.childNodes[h];\n                    if (node.nodeType === Node.ELEMENT_NODE) {\n                      // removes nodes not needed (clean up)\n                      node.removeAttribute('data-expanded-url');\n                      node.removeAttribute('data-scribe');\n                      node.removeAttribute('dir');\n                      node.removeAttribute('data-query-source');\n                    }\n                  }\n                  return tweet.innerHTML;\n                }(tweets[i]))\n                .replace('{date}', post_dates[i].getAttribute('aria-label'));\n            }\n            document.querySelector('.js-tweets').innerHTML = li_list;\n          }\n\n        }, 500);\n      } else {\n        console.log('unable to get tweets')\n      }\n    }, 500);\n\n  }\n","// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n// requestAnimationFrame polyfill by Erik MÃ¶ller. fixes from Paul Irish and Tino Zijdel\n\n// MIT license\n\n(function() {\n  var lastTime = 0;\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\n  for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame']\n      || window[vendors[x]+'CancelRequestAnimationFrame'];\n  }\n\n  if (!window.requestAnimationFrame)\n    window.requestAnimationFrame = function(callback, element) {\n      var currTime = new Date().getTime();\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n      var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n        timeToCall);\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n\n  if (!window.cancelAnimationFrame)\n    window.cancelAnimationFrame = function(id) {\n      clearTimeout(id);\n    };\n}());\n","/*\n * smoothscroll polyfill - v0.3.4\n * https://iamdustan.github.io/smoothscroll\n * 2016 (c) Dustan Kasten, Jeremias Menichelli - MIT License\n */\n\n(function(w, d, undefined) {\n  'use strict';\n\n  /*\n   * aliases\n   * w: window global object\n   * d: document\n   * undefined: undefined\n   */\n\n  // polyfill\n  function polyfill() {\n    // return when scrollBehavior interface is supported\n    if ('scrollBehavior' in d.documentElement.style) {\n      return;\n    }\n\n    /*\n     * globals\n     */\n    var Element = w.HTMLElement || w.Element;\n    var SCROLL_TIME = 468;\n\n    /*\n     * object gathering original scroll methods\n     */\n    var original = {\n      scroll: w.scroll || w.scrollTo,\n      scrollBy: w.scrollBy,\n      elScroll: Element.prototype.scroll || scrollElement,\n      scrollIntoView: Element.prototype.scrollIntoView\n    };\n\n    /*\n     * define timing method\n     */\n    var now = w.performance && w.performance.now\n      ? w.performance.now.bind(w.performance) : Date.now;\n\n    /**\n     * changes scroll position inside an element\n     * @method scrollElement\n     * @param {Number} x\n     * @param {Number} y\n     */\n    function scrollElement(x, y) {\n      this.scrollLeft = x;\n      this.scrollTop = y;\n    }\n\n    /**\n     * returns result of applying ease math function to a number\n     * @method ease\n     * @param {Number} k\n     * @returns {Number}\n     */\n    function ease(k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n\n    /**\n     * indicates if a smooth behavior should be applied\n     * @method shouldBailOut\n     * @param {Number|Object} x\n     * @returns {Boolean}\n     */\n    function shouldBailOut(x) {\n      if (typeof x !== 'object'\n        || x === null\n        || x.behavior === undefined\n        || x.behavior === 'auto'\n        || x.behavior === 'instant') {\n        // first arg not an object/null\n        // or behavior is auto, instant or undefined\n        return true;\n      }\n\n      if (typeof x === 'object'\n        && x.behavior === 'smooth') {\n        // first argument is an object and behavior is smooth\n        return false;\n      }\n\n      // throw error when behavior is not supported\n      throw new TypeError('behavior not valid');\n    }\n\n    /**\n     * finds scrollable parent of an element\n     * @method findScrollableParent\n     * @param {Node} el\n     * @returns {Node} el\n     */\n    function findScrollableParent(el) {\n      var isBody;\n      var hasScrollableSpace;\n      var hasVisibleOverflow;\n\n      do {\n        el = el.parentNode;\n\n        // set condition variables\n        isBody = el === d.body;\n        hasScrollableSpace =\n          el.clientHeight < el.scrollHeight ||\n          el.clientWidth < el.scrollWidth;\n        hasVisibleOverflow =\n          w.getComputedStyle(el, null).overflow === 'visible';\n      } while (!isBody && !(hasScrollableSpace && !hasVisibleOverflow));\n\n      isBody = hasScrollableSpace = hasVisibleOverflow = null;\n\n      return el;\n    }\n\n    /**\n     * self invoked function that, given a context, steps through scrolling\n     * @method step\n     * @param {Object} context\n     */\n    function step(context) {\n      // call method again on next available frame\n      context.frame = w.requestAnimationFrame(step.bind(w, context));\n\n      var time = now();\n      var value;\n      var currentX;\n      var currentY;\n      var elapsed = (time - context.startTime) / SCROLL_TIME;\n\n      // avoid elapsed times higher than one\n      elapsed = elapsed > 1 ? 1 : elapsed;\n\n      // apply easing to elapsed time\n      value = ease(elapsed);\n\n      currentX = context.startX + (context.x - context.startX) * value;\n      currentY = context.startY + (context.y - context.startY) * value;\n\n      context.method.call(context.scrollable, currentX, currentY);\n\n      // return when end points have been reached\n      if (currentX === context.x && currentY === context.y) {\n        w.cancelAnimationFrame(context.frame);\n        return;\n      }\n    }\n\n    /**\n     * scrolls window with a smooth behavior\n     * @method smoothScroll\n     * @param {Object|Node} el\n     * @param {Number} x\n     * @param {Number} y\n     */\n    function smoothScroll(el, x, y) {\n      var scrollable;\n      var startX;\n      var startY;\n      var method;\n      var startTime = now();\n      var frame;\n\n      // define scroll context\n      if (el === d.body) {\n        scrollable = w;\n        startX = w.scrollX || w.pageXOffset;\n        startY = w.scrollY || w.pageYOffset;\n        method = original.scroll;\n      } else {\n        scrollable = el;\n        startX = el.scrollLeft;\n        startY = el.scrollTop;\n        method = scrollElement;\n      }\n\n      // cancel frame when a scroll event's happening\n      if (frame) {\n        w.cancelAnimationFrame(frame);\n      }\n\n      // scroll looping over a frame\n      step({\n        scrollable: scrollable,\n        method: method,\n        startTime: startTime,\n        startX: startX,\n        startY: startY,\n        x: x,\n        y: y,\n        frame: frame\n      });\n    }\n\n    /*\n     * ORIGINAL METHODS OVERRIDES\n     */\n\n    // w.scroll and w.scrollTo\n    w.scroll = w.scrollTo = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.scroll.call(\n          w,\n          arguments[0].left || arguments[0],\n          arguments[0].top || arguments[1]\n        );\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        ~~arguments[0].left,\n        ~~arguments[0].top\n      );\n    };\n\n    // w.scrollBy\n    w.scrollBy = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.scrollBy.call(\n          w,\n          arguments[0].left || arguments[0],\n          arguments[0].top || arguments[1]\n        );\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        ~~arguments[0].left + (w.scrollX || w.pageXOffset),\n        ~~arguments[0].top + (w.scrollY || w.pageYOffset)\n      );\n    };\n\n    // Element.prototype.scroll and Element.prototype.scrollTo\n    Element.prototype.scroll = Element.prototype.scrollTo = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.elScroll.call(\n          this,\n          arguments[0].left || arguments[0],\n          arguments[0].top || arguments[1]\n        );\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        this,\n        this,\n        arguments[0].left,\n        arguments[0].top\n      );\n    };\n\n    // Element.prototype.scrollBy\n    Element.prototype.scrollBy = function() {\n      var arg0 = arguments[0];\n\n      if (typeof arg0 === 'object') {\n        this.scroll({\n          left: arg0.left + this.scrollLeft,\n          top: arg0.top + this.scrollTop,\n          behavior: arg0.behavior\n        });\n      } else {\n        this.scroll(\n          this.scrollLeft + arg0,\n          this.scrollTop + arguments[1]\n        );\n      }\n    };\n\n    // Element.prototype.scrollIntoView\n    Element.prototype.scrollIntoView = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.scrollIntoView.call(this, arguments[0] || true);\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      var scrollableParent = findScrollableParent(this);\n      var parentRects = scrollableParent.getBoundingClientRect();\n      var clientRects = this.getBoundingClientRect();\n\n      if (scrollableParent !== d.body) {\n        // reveal element inside parent\n        smoothScroll.call(\n          this,\n          scrollableParent,\n          scrollableParent.scrollLeft + clientRects.left - parentRects.left,\n          scrollableParent.scrollTop + clientRects.top - parentRects.top\n        );\n        // reveal parent in viewport\n        w.scrollBy({\n          left: parentRects.left,\n          top: parentRects.top,\n          behavior: 'smooth'\n        });\n      } else {\n        // reveal element in viewport\n        w.scrollBy({\n          left: clientRects.left,\n          top: clientRects.top,\n          behavior: 'smooth'\n        });\n      }\n    };\n  }\n\n  if (typeof exports === 'object') {\n    // commonjs\n    module.exports = { polyfill: polyfill };\n  } else {\n    // global\n    polyfill();\n  }\n})(window, document);\n"]}